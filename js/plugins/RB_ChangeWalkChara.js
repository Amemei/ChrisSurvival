/*:ja
 * @plugindesc 身体防具により異なる歩行グラフィックに変更します。
 * @author 龍尾 v1.1
 *
 * @help このプラグインには、プラグインコマンドはありません。
 *
 * アクターID1の場合のみ歩行グラフィックを変更します。
 * 身体防具を追加する場合は、RB_ChangeWalkChara_grpに追加してください。
 *
 * V1.1
 * 全裸になった際に任意のスイッチをONにする機能を追加
 * スイッチIDを変更するには、RB_ChangeWalkChara_NudeSwの値を変更してください。
 */
(function() {

	// 全裸になった際にONにするスイッチID
	var RB_ChangeWalkChara_NudeSw = 79

	var RB_ChangeWalkChara_grp = [  "$nude",			// 全裸歩行グラフィック
									"$Chris",			// 身体防具ID1を装備時の歩行グラフィックNAME
									"$Chris",  // 身体防具ID2を～
									"$Chris",
									"$Chris",
									"$Chris",
									"$Chris",
									"$Chris",
                                    "$nude",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                                                        "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                                                        "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                                                        "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                                                        "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",
                                    "$eris_01",        
                                    
	];

	RB_ChangeWalkChara_Set = function(actor) {
		// Actor1でない場合は処理対象外とする
		if (actor.actorId() != 1) {
			return;
		}
	    var equips = actor.equips();
		if (equips[2] == null) {
			// #裸用歩行グラ設定
			actor._characterName = RB_ChangeWalkChara_grp[0];
			// 全裸スイッチON
			$gameSwitches.setValue(RB_ChangeWalkChara_NudeSw, true);
		} else if (equips[2].id < RB_ChangeWalkChara_grp.length) {
			// 身体装備IDにより歩行グラ設定
			actor._characterName = RB_ChangeWalkChara_grp[equips[2].id];
			// 全裸スイッチOFF
			$gameSwitches.setValue(RB_ChangeWalkChara_NudeSw, false);
		} else {
			// 裸用歩行グラ設定(異常処理)
			actor._characterName = RB_ChangeWalkChara_grp[0];
			// 全裸スイッチON
			$gameSwitches.setValue(RB_ChangeWalkChara_NudeSw, true);
		}
		$gamePlayer.refresh();
	};

	var _RB_ChangeWalkChara_Scene_Equip_terminate = Scene_Equip.prototype.terminate;
	Scene_Equip.prototype.terminate = function() {
		RB_ChangeWalkChara_Set(this.actor());
		_RB_ChangeWalkChara_Scene_Equip_terminate.call(this);
	};

	// Change Equipment
	Game_Interpreter.prototype.command319 = function() {
	    var actor = $gameActors.actor(this._params[0]);
	    if (actor) {
	        actor.changeEquipById(this._params[1], this._params[2]);
			RB_ChangeWalkChara_Set(actor);
	    }
	    return true;
	};

})();
